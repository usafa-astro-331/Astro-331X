# Lab 1: electrical power

In this lab you will test FlatSAT's solar panel to determine if it will generate enough power to satisfy mission requirements. You will measure the voltage and current generated by the solar array at various voltages to generate an I-V plot. You will collect two sets of I-V measurements, one for a series-connected array and one for a parallel-connected array. 

You will also record solar illuminance with a luxmeter at the time of your power measurements. 

In your post-lab analysis, you will compare your prelab performance predictions to the results you record in this lab. You will present your I-V plot and use it to identify your array's peak power. You will calculate array efficiency using the incident luminosity and the peak power generated. Finally, you will recommend any design changes necessary to ensure the solar array can meet mission requirements.

# Prelab activities

Before the metrology lab, you need to determine the  expected range of current and voltage produced by FlatSAT’s solar array. 

Connect FlatSAT’s array in series. Photovoltaic cells are diodes—energy will only flow through them one way. Using the block of 8 pins, use 3 female jumper cables to connect each cell to its neighbor. Each jumper cable should connect this way: `/` (not this way `\`)

Connect the array’s output to a multimeter. While outside, point the array at the sun and record the maximum current and voltage.

Repeat after you connect the array in parallel. 

To connect in parallel, remove the 3 series jumpers and connect 8 parallel jumpers. Using the block of 10 pins, connect all of the positive (top) terminals together and all of the bottom pins together. The block of 10 pins contains 2 sets of 5 shorted (connected) pins: the tops are all connected and the bottoms are all connected. You can see this on the back. 

Once you connect 4 jumpers between the cell positives and the positive bus bar (top row of 5), connect the free top pin to a multimeter. Repeat with the negative terminals. 

Record your results. 

|          | voltage (V) | current (mA) |
| -------- | ----------- | ------------ |
| series   |             |              |
| parallel |             |              |



## hardware

- FlatSAT
  - existing components
  - micro SD card
  - solar array

## equipment

- benchtop power supply
- ESD-safe grounding straps
- laptop
- Micro USB cable
- halogen lamp
- USB micro SD card reader
- wires
- luxmeter
  ![luxmeter](sources/luxmeter.png)

## documentation

- `lab 1 analysis.pdf`, also available at https://www.overleaf.com/read/fmsknsscphdd

## software

- Arduino IDE
- `lab_01_electrical_power.ino`



## setup

Wear and connect your ESD grounding bracelet. 

Read `lab 1 analysis.pdf` and complete pre-lab activities. 



![wiring diagram](../sources/fritzing/331X.svg)



### prepare microSD card

The Arduino MKR Zero has a microSD card slot. You will use this card to store data in various labs. If this is your first lab with an SD card, prepare the card. 

- write your group name on a microSD card
- insert the card in the USB reader and connect to your computer
- Format the card
  - Window Explorer -> Right click -> format -> Fat 32 -> Ok
  - While you format the card, name it after your group
- Insert the card into your Arduino MKR Zero

### solar array

Record which solar panel you are using. 

Connect the four cells of the array in series. You will complete the data collection steps, and then repeat them with the cells connected in parallel. 

Connect the solar array's output to the breadboard's bottom power rail. 

## upload FlatSAT code and test setup

Open `lab 01 electrical power.ino` in the Arduino IDE. 

Connect Arduino to computer via USB. 

Select the correct board (Arduino MKRZERO) and port. 

Expose the solar panel to the halogen light. 

Upload your code. 

Open serial monitor (tools -> serial monitor).

Slowly turn the potentiometer and watch the current and voltage change on the LCD. (Deselect ‘value 1’, which is time.)

Disconnect the Arduino and turn off the halogen light. 

## data collection scheme

FlatSAT saves current and voltage to `iv_curve.csv` every 500 ms. On each powerup it writes a legend and then begins logging data. Subsequent powerups will again write a legend and add more data to the file. The legend message can be used to separate test runs. It will be obvious which run is series vs parallel. 

## collect solar array performance data outside

Disconnect power so you're not saving excess data. 

Take FlatSAT and the luxmeter outside and find a test site in direct sunlight. 

Point the luxmeter toward the sun and record the sun's power in lux. You will have to adjust the range to its maximum setting. The measured value may jump around, try to take an average value. Record the average for later use calculating efficiency. 

Point FlatSAT at the sun and power it on. *Very* slowly (slower than you’re thinking), turn the potentiometer from one end to the other. FlatSAT will record current and voltage at 500 ms intervals. You will record periodic current and voltage measurements from the LCD display as a backup in case the stored data gets corrupted or lost. 

Remove the potentiometer to record a measurement of $V_{oc}$. Short the potentiometer pins with a wire to record a measurement of $I_{sc}$. 

Disconnect power, rewire the solar array in parallel, and repeat these steps to collect the parallel I-V data. 

## data collection and analysis

- transfer `iv_curve.csv` to your computer for later analysis
- perform data analysis from `lab 1 analysis.pdf`

## cleanup

Leave all FlatSAT components and wires connected for future labs. 

Turn off everything and straighten your work area. 
